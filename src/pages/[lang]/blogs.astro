---
import Layout from '../../layouts/Layout.astro';
import { translations } from '../../i18n';
import { blogPosts } from '../../i18n/blog';
import Hero from '../../components/Hero.astro';
import BlogGrid from '../../components/blogs/BlogGrid.astro';

const { lang } = Astro.params;
const currentLang = (lang || 'en') as 'en' | 'zh';
const currentPath = Astro.url.pathname;
const t = translations[currentLang];
const pageTitle = t.pageTitle.blogs;
const pageMeta = t.pageMeta.blogs;
const blogContent = t.blogs;
const posts = blogPosts[currentLang];

export function getStaticPaths() {
  return [
    { params: { lang: 'en' } },
    { params: { lang: 'zh' } },
  ];
}
---

<Layout title={pageTitle} description={pageMeta.description} keywords={pageMeta.keywords} lang={currentLang} currentLang={currentLang} currentPath={currentPath}>
  <main class="min-h-screen">
    <Hero title={blogContent.title} description={blogContent.subtitle} />

    <BlogGrid
      posts={posts}
      currentLang={currentLang}
      readMoreText={blogContent.readMore}
    />
  </main>
</Layout>

<style>
  main {
    width: 100%;
  }
</style>
