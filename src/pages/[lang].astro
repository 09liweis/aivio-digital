---
import Layout from '../layouts/Layout.astro';
import Header from '../components/Header.astro';
import Footer from '../components/Footer.astro';
import Hero from '../components/Hero.astro';
import Services from '../components/Services.astro';
import HowItWorks from '../components/HowItWorks.astro';
import Testimonials from '../components/Testimonials.astro';
import CaseStudy from '../components/CaseStudy.astro';
import FinalCTA from '../components/FinalCTA.astro';
import FAQs from '../components/FAQs.astro';

// Get the language from the URL parameter
const { lang } = Astro.params;
const currentLang = (lang || 'en') as 'en' | 'zh';
const currentPath = Astro.url.pathname;

// Generate static paths for language variants
export function getStaticPaths() {
  return [
    { params: { lang: 'en' } },  // /en for English
    { params: { lang: 'zh' } },  // /zh for Chinese
  ];
}
---

<Layout title={currentLang === 'zh' ? '首页 | Aivio Digital' : 'Home | Aivio Digital'} lang={currentLang}>
  <Header currentLang={currentLang} currentPath={currentPath} />

  <main>
    <Hero currentLang={currentLang} />
    <Services currentLang={currentLang} />
    <HowItWorks currentLang={currentLang} />
    <Testimonials currentLang={currentLang} />
    <CaseStudy currentLang={currentLang} />
    <FinalCTA currentLang={currentLang} />
    <FAQs currentLang={currentLang} />
  </main>

  <Footer currentLang={currentLang} />
</Layout>

<style>
  main {
    width: 100%;
  }
</style>
